<!DOCTYPE html>
<html lang="pt-br">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>ATV - AIRBNB</title>
    <link rel="stylesheet" href="css/reset.css" />
    <link rel="stylesheet" href="css/style.css" />
  </head>
  <body>
    <main>
      <section>
        <form action="">
          <h1>
            <span id="valor_noite">R$620</span
            ><span class="pequeno">noite</span>
          </h1>
          <div class="todos">
            <div class="datas">
              <div class="esquerda">
                <p><label for="checkin">CHECK-IN</label></p>
                <input
                  class="data"
                  type="date"
                  required
                  name="checkin"
                  id="checkin" />
              </div>
              <div>
                <p><label for="checkout">CHECKOUT</label></p>
                <input
                  class="data"
                  type="date"
                  required
                  name="checkout"
                  id="checkout" />
              </div>
            </div>
            <div class="hospedes">
              <p><label for="hospede">HÓSPEDES</label></p>
              <select name="hospede" id="hospede">
                <option value="1">1 Hóspede</option>
                <option value="2">2 Hóspedes</option>
                <option value="3">3 Hóspedes</option>
                <option value="4">4 Hóspedes</option>
              </select>
            </div>
          </div>
          <button id="reserva">Reservar</button>
        </form>
        <div class="results">
          <p>Você ainda não será cobrado</p>
          <div class="listas">
            <ul>
              <li>
                <span id="subtotal">R$620 X 0 noites</span>
              </li>
              <li>
                <span>Taxa de limpeza</span>
              </li>
              <li>
                <span>Taxa de serviço do Airbnb</span>
              </li>
            </ul>
            <ul class="valores">
              <li>
                <span id="valorsub">R$0</span>
              </li>
              <li>
                <span id="taxa_limpeza">R$120</span>
              </li>
              <li>
                <span id="taxa_servico">R$0</span>
              </li>
            </ul>
          </div>
          <hr />
          <p>Total sem impostos: <span id="total">R$0</span></p>
        </div>
      </section>
      <script>
        let reserva = document.getElementById("reserva");
        let checkout = document.getElementById("checkout");

        checkout.addEventListener("change", function () {
          let data_saida = new Date(this.value);
          let data_entrada = new Date(document.getElementById("checkin").value);
          let diarias = (data_saida - data_entrada) / 86400000;
          let subtotal = document.getElementById("subtotal");
          let hospedes = document.getElementById("hospede").value;

          let noite = document.getElementById("valor_noite");
          let valor_noite = parseFloat(noite.innerText.substring(2));

          subtotal.innerText = "R$" + valor_noite + " X " + diarias + " noites";

          let valorsub = valor_noite * diarias + (hospedes - 1) * 0.2;
          let taxa_servico = valorsub * 0.15;

          let taxa_servicohtml = document.getElementById("taxa_servico");
          taxa_servicohtml.innerText = "R$" + taxa_servico;

          let taxa_limpeza = document.getElementById("taxa_limpeza");
          let valor_limpeza = parseFloat(taxa_limpeza.innerText.substring(2));
          console.log(valor_limpeza);

          let valorsubhtml = document.getElementById("valorsub");
          valorsubhtml.innerText = "R$" + valorsub;

          let total = valorsub + valor_limpeza + taxa_servico;
          let totalhtml = document.getElementById("total");
          totalhtml.innerText = "R$" + total;
        });
      </script>
    </main>
  </body>
</html>
